<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CubeWell - 3D Puzzle Game</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ®</text></svg>">
</head>
<body>
    <div id="game-screen" class="screen">
        <div id="game-container">
            <div id="status-overlay" style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; font-family: monospace; z-index: 100;">
                <div class="game-title">CubeWell</div>
                <div>Game State: <span id="game-running-status">?</span></div>
                <div>Score: <span id="score">0</span></div>
                <div>Level: <span id="level">1</span></div>
                <div>Last Key: <span id="last-key-pressed">None</span></div>
                <div>High Score: <span id="high-score">0</span></div>
                <div id="game-over-message" style="display: none; visibility: hidden;">
                    GAME OVER
                </div>
            </div>
            
            <!-- Add a centered start message that's separate from the status overlay -->
            <div id="start-message" style="display: none;">Press SPACE to Start</div>
            
            <div id="controls-overlay" style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; font-family: monospace; z-index: 100;">
                <div><strong>Controls:</strong></div>
                <div>Arrows: Move Block</div>
                <div>Q/E: Rotate X/Z axis</div>
                <div>W: Rotate Y axis</div>
                <div>Space: Drop Block</div>
                <div>P: Pause/Resume</div>
                <div>R: Restart Game</div>
                <div>M: Toggle Music</div>
            </div>
            
            <div id="canvas-container"></div>
            <div id="game-info">
                <div id="next-block">
                    <div id="next-block-label">Next:</div>
                    <div id="preview-container"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden elements for game functionality -->
    <div style="display: none;">
        <input type="range" id="music-volume" min="0" max="100" value="50">
        <input type="range" id="sfx-volume" min="0" max="100" value="50">
        <select id="difficulty">
            <option value="medium" selected>Medium</option>
        </select>
    </div>
    
    <!-- Load libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Polyfill for crypto.randomUUID -->
    <script>
    if (!crypto.randomUUID) {
        crypto.randomUUID = function() {
            // Simple UUID v4 implementation
            return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
                (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
            );
        };
        console.log("Added polyfill for crypto.randomUUID");
    }
    </script>

    <!-- Load game scripts -->
    <script type="module" src="js/main.js"></script>

    <style>
    /* Prominent start message styling */
    #start-message {
        font-size: 48px;
        font-weight: bold;
        color: #4CAF50;
        text-align: center;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.8);
        padding: 30px;
        border-radius: 15px;
        z-index: 1000;
        width: 80%;
        max-width: 600px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
        text-shadow: 0 0 10px #fff;
        border: 3px solid #4CAF50;
    }

    /* Add a full-screen overlay when game is paused */
    #game-screen.paused::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 90;
    }
    </style>
</body>
</html> 